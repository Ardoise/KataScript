#!/bin/bash

 : ${1?"Usage: $0 <NUMBER>"} # From "usage-message.sh example script.
 
case "$1" in
1)
  # stdin - stdout
  [ -d "/source/directory" -a -d "/dest/directory" ] && {
    (cd /source/directory && tar cf - . ) | (cd /dest/directory && tar xpvf -)
  }
  # Move entire file tree from one directory to another
  # [courtesy Alan Cox <a.cox@swansea.ac.uk>, with a minor change]

  # 1) cd /source/directory
  #    Source directory, where the files to be moved are.
  # 2) &&
  #   "And-list": if the 'cd' operation successful,
  #    then execute the next command.
  # 3) tar cf - .
  #    The 'c' option 'tar' archiving command creates a new archive,
  #    the 'f' (file) option, followed by '-' designates the target file
  #    as stdout, and do it in current directory tree ('.').
  # 4) |
  #    Piped to ...
  # 5) ( ... )
  #    a subshell
  # 6) cd /dest/directory
  #    Change to the destination directory.
  # 7) &&
  #   "And-list", as above
  # 8) tar xpvf -
  #    Unarchive ('x'), preserve ownership and file permissions ('p'),
  #    and send verbose messages to stdout ('v'),
  #    reading data from stdin ('f' followed by '-').
  #
  #    Note that 'x' is a command, and 'p', 'v', 'f' are options.
  #
  # Whew!
  
  # More elegant than, but equivalent to:
  #   cd source/directory
  #   tar cf - . | (cd ../dest/directory; tar xpvf -)

;;
*)
 : 
;;
esac

exit 0

